<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Регистрация</title>
  <link rel="stylesheet" href="style.css">
</head>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCB5Aw58SZouh2KZhcCxRrnAZNZixOM6Xw",
    authDomain: "anime-desserts.firebaseapp.com",
    projectId: "anime-desserts",
    storageBucket: "anime-desserts.firebasestorage.app",
    messagingSenderId: "286196048091",
    appId: "1:286196048091:web:c21542ee5e838195d8acfe",
    measurementId: "G-HL5K95J9ZV"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const form = document.querySelector("form");
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const email = form.email.value;
    const password = form.password.value;

    auth.createUserWithEmailAndPassword(email, password)
      .then((cred) => {
        alert("Регистрация прошла успешно!");
        window.location.href = "chat.html"; // редирект в чат
      })
      .catch((err) => {
        alert("Ошибка: " + err.message);
      });
  });

  function signInAnonymously() {
    auth.signInAnonymously()
      .then(() => {
        alert("Вы вошли как аноним!");
        window.location.href = "chat.html"; // редирект в чат
      })
      .catch((err) => {
        alert("Ошибка: " + err.message);
      });
  }
</script>
<body>
  <div class="register-container">
    <h1>Создай свой профиль</h1>
    <form method="POST">
      <input type="text" name="username" placeholder="Имя пользователя" required>
      <input type="email" name="email" placeholder="Электронная почта" required>
      <input type="password" name="password" placeholder="Пароль" required>
      <button type="submit">Зарегистрироваться</button>
    </form>
    <p>Уже есть аккаунт? <a href="login.html">Войти</a></p>
    <button onclick="signInAnonymously()">Продолжить без регистрации</button>
  </div>
</body>
</html>